document.getElementById("id_card").focus(),$(function(){var a=function(){var a=$("#wall-data"),b={first_name:"Имя",last_name:"Фамилия",patronymic:"Отчество"},c={passport:"Паспорт",travel_passport:"Загран Паспорт",drive_license:"Водительское Удостоверение"},d=function(a,b){return"<p><strong>"+a+"</strong>: "+b+"</p>"},e=function(e){e=$.parseJSON(e)[0].fields;var f="";e.photo_url&&(f+='<img class="img-thumbnail" src="'+e.photo_url+'" alt="" width="300" height="300" />');for(var g in b)f+=d(b[g],e[g]);for(var g in c)e[g]&&(f+=d(c[g],e[g]));a.html(f)},f=function(){a.html("")};return{show:e,hide:f}}(),b=function(){var a,b=$("#CheckCardForm").find("#alert-card"),c=function(c){if("number"==typeof c)switch(c){case 404:a="Пользователя с такой картой не найдено.";break;default:a="Сервер не смог выполнить запрос."}else a=c;b.html("<strong>Ошибка!</strong> "+a),b.show()},d=function(){b.hide()};return{show:c,hide:d}}(),c=function(){var a=$("#next_link"),b=function(b){a.removeClass("disabled").attr("href",b)},c=function(){a.addClass("disabled").attr("href","#")};return{enable:b,disable:c}}(),d=function(){var d=$(this).val(),e=$("#CheckCardForm");b.hide(),a.hide(),c.disable(),d.length>2?$.ajax({url:e.attr("action"),type:"POST",data:e.serialize(),beforeSend:function(a){a.setRequestHeader("X-CSRFToken",Cookie.getCookie("csrftoken"))},success:function(d){"success"===d.status?(a.show(d.user),c.enable(d.reserve)):b.show(500)},error:function(a){b.show(a.status)}}):b.show("Неверный штрих код")};$("#id_card").keypress(function(a){"13"==a.which&&(a.preventDefault(),$("#id_card").blur())}),$("#id_card").on("change",d)});